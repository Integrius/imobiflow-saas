(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{3662:function(e,t,n){Promise.resolve().then(n.bind(n,963))},963:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o=n(9566),r=n(8590),l=n(6555),i=n(5918),a=n(1634),s=n(5538);function u(){let e=(0,l.useRouter)(),[t,n]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[c,m]=(0,r.useState)(""),[v,f]=(0,r.useState)(!1);async function h(n){n.preventDefault(),m(""),f(!0);try{await (0,a.x4)({email:t,senha:u}),e.push("/dashboard")}catch(e){var o,r;m((null===(r=e.response)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:o.error)||"Erro ao fazer login")}finally{f(!1)}}async function g(t){m(""),f(!0);try{let n=await s.h.post("/auth/google",{credential:t.credential});n.data.token&&(localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user)),e.push("/dashboard"))}catch(e){var n,o;m((null===(o=e.response)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.error)||"Erro ao fazer login com Google")}finally{f(!1)}}return(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,o.jsxs)("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-center text-3xl font-bold text-gray-900",children:"ImobiFlow"}),(0,o.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Fa\xe7a login para continuar"})]}),(0,o.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:h,children:[c&&(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:c}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,o.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:t,onChange:e=>n(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"seu@email.com"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"senha",className:"block text-sm font-medium text-gray-700",children:"Senha"}),(0,o.jsx)("input",{id:"senha",name:"senha",type:"password",required:!0,value:u,onChange:e=>d(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"••••••••"})]})]}),(0,o.jsx)("button",{type:"submit",disabled:v,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400",children:v?"Entrando...":"Entrar"})]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,o.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,o.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,o.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Ou continue com"})})]}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)(i.kZ,{onSuccess:g,onError:function(){m("Erro ao fazer login com Google")},useOneTap:!0,locale:"pt-BR"})}),(0,o.jsxs)("div",{className:"text-center text-sm text-gray-500 mt-4",children:[(0,o.jsx)("p",{children:"Credenciais de teste:"}),(0,o.jsx)("p",{className:"font-mono",children:"admin@imobiflow.com / admin123"})]})]})})}},5538:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});let o=n(7412).Z.create({baseURL:"".concat("https://api.integrius.com.br","/api/v1"),headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),o.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)})},1634:function(e,t,n){"use strict";n.d(t,{LP:function(){return i},kS:function(){return l},x4:function(){return r}});var o=n(5538);async function r(e){let t=await o.h.post("/auth/login",e);return t.data.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user))),t.data}function l(){localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"}function i(){return localStorage.getItem("token")}},5918:function(e,t,n){"use strict";n.d(t,{GoogleOAuthProvider:function(){return l},kZ:function(){return a}});var o=n(8590);let r=(0,o.createContext)(null);function l(e){let{clientId:t,nonce:n,onScriptLoadSuccess:l,onScriptLoadError:i,children:a}=e,s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{nonce:t,onScriptLoadSuccess:n,onScriptLoadError:r}=e,[l,i]=(0,o.useState)(!1),a=(0,o.useRef)(n);a.current=n;let s=(0,o.useRef)(r);return s.current=r,(0,o.useEffect)(()=>{let e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=t,e.onload=()=>{var e;i(!0),null===(e=a.current)||void 0===e||e.call(a)},e.onerror=()=>{var e;i(!1),null===(e=s.current)||void 0===e||e.call(s)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[t]),l}({nonce:n,onScriptLoadSuccess:l,onScriptLoadError:i}),u=(0,o.useMemo)(()=>({clientId:t,scriptLoadedSuccessfully:s}),[t,s]);return o.createElement(r.Provider,{value:u},a)}let i={large:40,medium:32,small:20};function a(e){let{onSuccess:t,onError:n,useOneTap:l,promptMomentNotification:a,type:s="standard",theme:u="outline",size:d="large",text:c,shape:m,logo_alignment:v,width:f,locale:h,click_listener:g,containerProps:x,...p}=e,b=(0,o.useRef)(null),{clientId:w,scriptLoadedSuccessfully:y}=function(){let e=(0,o.useContext)(r);if(!e)throw Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),j=(0,o.useRef)(t);j.current=t;let N=(0,o.useRef)(n);N.current=n;let k=(0,o.useRef)(a);return k.current=a,(0,o.useEffect)(()=>{var e,t,n,o,r,i,a,x,S;if(y)return null===(n=null===(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===n||n.initialize({client_id:w,callback:e=>{var t,n;if(!(null==e?void 0:e.credential))return null===(t=N.current)||void 0===t?void 0:t.call(N);let{credential:o,select_by:r}=e;j.current({credential:o,clientId:null!==(n=null==e?void 0:e.clientId)&&void 0!==n?n:null==e?void 0:e.client_id,select_by:r})},...p}),null===(i=null===(r=null===(o=null==window?void 0:window.google)||void 0===o?void 0:o.accounts)||void 0===r?void 0:r.id)||void 0===i||i.renderButton(b.current,{type:s,theme:u,size:d,text:c,shape:m,logo_alignment:v,width:f,locale:h,click_listener:g}),l&&(null===(S=null===(x=null===(a=null==window?void 0:window.google)||void 0===a?void 0:a.accounts)||void 0===x?void 0:x.id)||void 0===S||S.prompt(k.current)),()=>{var e,t,n;l&&(null===(n=null===(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===n||n.cancel())}},[w,y,l,s,u,d,c,m,v,f,h]),o.createElement("div",{...x,ref:b,style:{height:i[d],...null==x?void 0:x.style}})}}},function(e){e.O(0,[827,977,844,744],function(){return e(e.s=3662)}),_N_E=e.O()}]);